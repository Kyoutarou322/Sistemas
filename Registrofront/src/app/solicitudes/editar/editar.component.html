<div *ngIf="modalVisible" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white p-6 rounded shadow-lg w-[400px] max-w-full relative flex flex-col items-center">

    <div class="bg-black absolute top-2 right-2 w-4 h-4 border border-black rounded-full"></div>

    <h2 class="text-xl font-bold mb-4 text-center">Editar Producto</h2>

    <!-- Producto -->
<div *ngIf="modoSoloLectura; else inputProducto" class="w-full">
  <div class="block mb-1 font-semibold self-start">Producto</div>
  <div
    class="w-full h-[38px] border-2 border-black rounded px-2 py-1 mb-1 flex items-center bg-white text-black"
    style="line-height: normal;"
  >
    {{ productoEditado.nombreProducto }}
  </div>
</div>
<ng-template #inputProducto>
  <label class="block mb-1 font-semibold self-start">Producto</label>
  <input
    type="text"
    [ngModel]="productoEditado.nombreProducto"
    (ngModelChange)="productoEditado.nombreProducto = $event"
    (input)="protegerParteIzquierdaProducto($event)"
    class="w-full border-2 border-black rounded px-2 py-1 mb-1"
  />
</ng-template>
<p class="text-sm text-gray-500 self-start mb-3">Anterior: {{ productoOriginal.nombreProducto }}</p>

<!-- Categoría -->
<div *ngIf="modoSoloLectura; else inputCategoria" class="w-full">
  <div class="block mb-1 font-semibold self-start">Categoría</div>
  <div
    class="w-full h-[38px] border-2 border-black rounded px-2 py-1 mb-1 flex items-center bg-white text-black"
    style="line-height: normal;"
  >
    {{ productoEditado.categoria }}
  </div>
</div>
<ng-template #inputCategoria>
  <label class="block mb-1 font-semibold self-start">Categoría</label>
  <input
    type="text"
    [ngModel]="productoEditado.categoria"
    (ngModelChange)="productoEditado.categoria = $event"
    (input)="protegerParteIzquierdaCategoria($event)"
    class="w-full border-2 border-black rounded px-2 py-1 mb-1"
  />
</ng-template>
<p class="text-sm text-gray-500 self-start mb-3">Anterior: {{ productoOriginal.categoria }}</p>

<!-- Cantidad -->
<div *ngIf="modoSoloLectura; else inputCantidad" class="w-full">
  <div class="block mb-1 font-semibold self-start">Cantidad</div>
  <div
    class="w-full h-[38px] border-2 border-black rounded px-2 py-1 mb-1 flex items-center bg-white text-black"
    style="line-height: normal;"
  >
    {{ productoEditado.cantidad }}
  </div>
</div>
<ng-template #inputCantidad>
  <label class="block mb-1 font-semibold self-start">Cantidad</label>
  <input
    type="text"
    [ngModel]="productoEditado.cantidad"
    (ngModelChange)="productoEditado.cantidad = $event"
    (input)="protegerParteIzquierdaCantidad($event)"
    class="w-full border-2 border-black rounded px-2 py-1 mb-1"
  />
</ng-template>
<p class="text-sm text-gray-500 self-start mb-6">Anterior: {{ productoOriginal.cantidad }}</p>

<!-- Detalle de la Solicitud -->
<label class="block mb-1 font-semibold self-start">Detalle de eliminación</label>
<textarea
  rows="3"
  [ngModel]="productoEditado.detalleSolicitud"
  (ngModelChange)="productoEditado.detalleSolicitud = $event"
  class="w-full border-2 border-black rounded px-2 py-1 mb-4"
></textarea>
<p class="text-sm text-gray-500 self-start mb-4">Anterior: {{ productoOriginal.detalleSolicitud }}</p>

    <!-- Botones -->
    <div class="flex justify-end space-x-2 w-full">
      <button (click)="cerrarModal()" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
      <button (click)="guardar()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Guardar</button>
    </div>
  </div>
</div>
